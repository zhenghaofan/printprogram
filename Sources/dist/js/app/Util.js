define([],function(){function d(e){setTimeout(e,1e3/60)}var e="2d",t="[object Array]",n="[object Number]",r="[object String]",s=Math.PI/180,o=180/Math.PI,u="#",a="",f="0",l="rgb(",c={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},h=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,p=function(){return requestAnimationFrame||webkitRequestAnimationFrame||mozRequestAnimationFrame||oRequestAnimationFrame||msRequestAnimationFrame||d}(),v={_isElement:function(e){return!!e&&e.nodeType==1},_isFunction:function(e){return!!(e&&e.constructor&&e.call&&e.apply)},_isObject:function(e){return!!e&&e.constructor==Object},_isArray:function(e){return Object.prototype.toString.call(e)==t},_isNumber:function(e){return Object.prototype.toString.call(e)==n},_isString:function(e){return Object.prototype.toString.call(e)==r},hasMethods:function(e){var t=[],n;for(n in e)this._isFunction(e[n])&&t.push(n);return t.length>0},extend:function(e,t){for(var n in t.prototype)n in e.prototype||(e.prototype[n]=t.prototype[n])},addMethods:function(e,t){var n;for(n in t)e.prototype[n]=t[n]},cloneObject:function(e){var t={};for(var n in e)this._isObject(e[n])?t[n]=this.cloneObject(e[n]):this._isArray(e[n])?t[n]=this.cloneArray(e[n]):t[n]=e[n];return t},cloneArray:function(e){return e.slice(0)},_getRGBAString:function(e){var t=e.red||0,n=e.green||0,r=e.blue||0,i=e.alpha||1;return["rgba(",t,",",n,",",r,",",i,")"].join(a)},_rgbToHex:function(e,t,n){return((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)},_hexToRgb:function(e){e=e.replace(u,a);var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},addGetterSetter:function(e,t){var n=this._capitalize(t);e.prototype["set"+n]=function(e){this[t]=e},e.prototype["get"+n]=function(){return this[t]}},addKOGetterSetter:function(e,t){var n=this._capitalize(t);e.prototype["set"+n]=function(e){this[t](e)},e.prototype["get"+n]=function(){return this[t]()}},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},getRandomColor:function(){var e=(Math.random()*16777215<<0).toString(16);while(e.length<6)e=f+e;return u+e},getRGB:function(e){var t;return e in c?(t=c[e],{r:t[0],g:t[1],b:t[2]}):e[0]===u?this._hexToRgb(e.substring(1)):e.substr(0,4)===l?(t=h.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},getImage:function(e,t){var n,r;if(!e)t(null);else if(this._isElement(e))t(e);else if(this._isString(e))n=new window.Image,n.onload=function(){t(n)},n.src=e;else if(e.data){r=document.createElement("canvas"),r.width=e.width,r.height=e.height;var i=r.getContext("2d");i.putImageData(e,0,0),this.getImage(r.toDataURL(),t)}else t(null)},getDPI:function(){var e=new Array;if(window.screen.deviceXDPI!=undefined)e[0]=window.screen.deviceXDPI,e[1]=window.screen.deviceYDPI;else{var t=document.createElement("DIV");t.style.cssText="width:1in;height:1in;position:absolute;left:0px;top:0px;z-index:99;visibility:hidden",document.body.appendChild(t),e[0]=parseInt(t.offsetWidth),e[1]=parseInt(t.offsetHeight),t.parentNode.removeChild(t)}return e},extendData:function(e,t){for(i in t)i in e&&(e[i]=t[i])},Event:{listeners:{},addEventListener:function(e,t,n){var r=[],i=arguments.length;for(var s=0;s<i;s++)r.push(arguments[s]);r=r.length>3?r.splice(3,r.length-1):[],typeof v.Event.listeners[e]!="undefined"?v.Event.listeners[e].push({scope:n,callback:t,args:r}):v.Event.listeners[e]=[{scope:n,callback:t,args:r}]},removeEventListener:function(e,t,n){if(typeof v.Event.listeners[e]!="undefined"){var r=v.Event.listeners[e].length,i=[];for(var s=0;s<r;s++){var o=v.Event.listeners[e][s];(o.scope!=n||o.callback!=t)&&i.push(o)}v.Event.listeners[e]=i}},hasEventListener:function(e,t,n){if(typeof v.Event.listeners[e]!="undefined"){var r=v.Event.listeners[e].length;if(t===undefined&&n===undefined)return r>0;for(var i=0;i<r;i++){var s=v.Event.listeners[e][i];if(s.scope==n&&s.callback==t)return!0}}return!1},dispatch:function(e,t){var n=0,r={type:e,target:t},i=[],s=arguments.length;for(var o=0;o<s;o++)i.push(arguments[o]);i=i.length>2?i.splice(2,i.length-1):[],i=[r].concat(i);if(typeof v.Event.listeners[e]!="undefined"){var u=v.Event.listeners[e].length;for(var o=0;o<u;o++){var a=v.Event.listeners[e][o];if(a&&a.callback){var f=i.concat(a.args);a.callback.apply(a.scope,f),n+=1}}}},getEvents:function(){var e="";for(var t in v.Event.listeners){var n=v.Event.listeners[t].length;for(var r=0;r<n;r++){var i=v.Event.listeners[t][r];e+=i.scope&&i.scope.className?i.scope.className:"anonymous",e+=" listen for '"+t+"'\n"}}return e}},RAF:p};return v});