define(["app/Stage","jquery","jqueryUI","knockout","app/Util"],function(e,t,n,r,i){var s=function(){this.selectedObject=r.observableArray(),this.menu=t("#stageRightmenu"),this.hasObj=r.computed(function(){return!!this.selectedObject().length},this),this.hasObjList=r.computed(function(){return this.selectedObject().length>1},this),this.init()};return s.prototype={init:function(){var e=this;t("#cvs").on("contextmenu",function(n){t(document).click(),n.button==2&&(n.preventDefault(),e.showMenu(n))}),t(document).on("click",function(){e.hideMenu()})},showMenu:function(t){var n=e.curDoc();n&&this.selectedObject(n.objectsInPoint||[]),this.menu.show().position({my:"left top",of:t})},hideMenu:function(){this.menu.hide()},showProperty:function(){var t=e.curDoc();if(t){var n;(n=t.focusObject())&&i.Event.dispatch("show"+i.capitalize(n.type)+"Property",this,n)}},focusObj:function(t){var n=e.curDoc();n&&(n.clearSelectedObjects(),n.focusObject(t),t.selected(!0),e.updateCanvas())}},new s});