define(["jquery","app/Stage","app/Util"],function(e,t,n){var r=function(e){var n=this;n.parent=e,n.name="addimage",n.newImage=null,n.x=0,n.y=0,n.init=function(){document.body.ondragover=function(){return!1},document.body.ondragend=function(){return!1},document.body.ondrop=n.readfile},n.addImage=function(e){var r=new Image;r.onload=function(){var r=t.curDoc();console.log(n.x),n.newImage=r.addImage({dataURL:e,offsetX:n.x,offsetY:n.y})},r.onerror=function(){},r.src=e},n.readfile=function(e){e.preventDefault();var r=e.dataTransfer.files[0],i=new FileReader;return i.onload=function(i){r.type.indexOf("image")>-1&&(t.updateMouseXY(e),n.x=t.mouseX(),n.y=t.mouseY(),n.addImage(i.target.result))},i.readAsDataURL(r),!1},n.setDefaultTool=function(){n.parent.setDefaultTool()},n.active=function(){},n.deactive=function(){},n.init()};return r});