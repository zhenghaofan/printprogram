define(["jquery","app/Stage","app/Util"],function(e,t,n){var r=function(r){var i=this;i.parent=r,i.name="addtext",i.newText=null,i.x=0,i.y=0,i.onmousedown=function(){var e=t.curDoc();e&&(n.Event.dispatch("beforeAddText",this),i.x=t.mouseX(),i.y=t.mouseY(),i.newText=e.addText(),i.newText.offsetX(i.x),i.newText.offsetY(i.y),t.updateCanvas(),i.setDefaultTool(),n.Event.dispatch("afterAddRect",this))},i.setDefaultTool=function(){i.parent.setDefaultTool()},i.active=function(){e(t.cvs).on("mousedown",i.onmousedown)},i.deactive=function(){e(t.cvs).off("mousedown",i.onmousedown)}};return r});